<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="bootstrap.min.css"/>        
        <title>Canvas tutorial</title>
        <style>
            canvas {
                border: 1px;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col">
                    <h1>Pagina para exibir Canvas</h1>
                </div>
            </div>
            <div class="row">
                <div class="col-10">                   
                    
                    <canvas id="canvas" width="500px" height="500px">
                        Se texto aparece ent√£o o canvas deu errado.
                    </canvas>

                    <script>
                        var posX = 50, posY = 100, cont_img = 0, nJogadores = 0;
                        var caminho = './desenhos/';
                        var cnv = document.querySelector('canvas');
                        var imageInput1 = document.getElementById("img1");
                        var ctx = cnv.getContext('2d');
                                // var img = new Image();
                                // img.src = "./desenhos/sprite_creeper0.png";
                        var imgArray = new Array();
                        imgArray[0] = new Image();   
                        imgArray[0].src = "./desenhos/sprite_creeper0.png";
                        imgArray[1] = new Image();   
                        imgArray[1].src = "./desenhos/sprite_creeper1.png";
                        imgArray[2] = new Image();   
                        imgArray[2].src = "./desenhos/sprite_creeper2.png";
                        imgArray[3] = new Image();   
                        imgArray[3].src = "./desenhos/sprite_creeper3.png";

                        desenha();
                        miniaturas();

                        function miniaturas()
                        {
                            ctx.drawImage(imgArray[0], 5, 5, 10, 10);                            
                            ctx.drawImage(imgArray[1], 20, 5, 10, 10);                            
                            ctx.drawImage(imgArray[2], 35, 5, 10, 10);                            
                        }

                        function trocaImg()
                        {
                            imgArray[0].src = caminho+imageInput1;
                            imgArray[1].src = caminho+imageInput1;
                            imgArray[2].src = caminho+imageInput1;
                            imgArray[3].src = caminho+imageInput1;
                            miniaturas();
                        }

                        function desenha()
                        {
                            ctx.clearRect(0, 20, cnv.width, cnv.height);
                            ctx.drawImage(imgArray[cont_img], posX, posY);
//                            ctx.fillRect(50, 50, 200, 200);
                        }

                        function mover(lado)
                        {
                            if(lado ==1){
                                posX = posX+10;
                            }else{
                                posX = posX-10;
                            }

                            if(cont_img < 3){
                                cont_img = cont_img + 1;
                            }else {
                                cont_img = 0;
                            }
                            desenha();

                            window.addEventListener("keyup", apertaTecla);

                            function apertaTecla(e)
                            {
                                if(e.keyCode == 37)
                                {
                                    if(posX >= 0){
                                        posX = posX-10;
                                    }else{
                                        posX = posX+1;
                                    }
                                }

                                if(e.keyCode == 39)
                                {
                                    if(posX <= 400){
                                        posX = posX+10;
                                    }else{
                                        posX = posX-1;
                                    }
                                }

                                desenha();
                            }
                        }
                    </script>
                </div>
            </div>

            <div class="row" style="margin-top: 10px;">
                <div class="col-2">
                    <button style="width: 150px;" onclick=" mover(2);">Direita </button>
                </div>
                <div class="col-2">
                    <button style="width: 150px;" onclick=" mover(1);"> Esquerda </button>        
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <input type='file' onclick="trocaImg();" name='img1' size='65' id='uploadimage1' />
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <input type='file' onclick="trocaImg();" name='img2' size='65' id='uploadimage2' />
                </div>
            </div>
        </div>
    </body>
</html>